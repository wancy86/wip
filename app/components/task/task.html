<div class="col-md-12">
    <h3 ng-show="task.id">编辑任务</h3>
    <h3 ng-hide="task.id">添加任务</h3>
</div>
<form novalidate name="newTaskForm" ng-submit="saveTask()">
    <div class="form-group col-md-6">
        <label for="password">
            选择项目
        </label>
        <select required class="form-control" ng-model="task.project" ng-options="pro as pro.project.name for pro in proUserTeam | orderBy : 'project.name'" name="project">
        </select>
        <div ng-messages="newTaskForm.project.$error" ng-if="newTaskForm.$submitted || newTaskForm.project.$touched">
            <p class="error" ng-message="required">*请选择项目</p>
        </div>
    </div>
    <div class="form-group col-md-12">
        <label for="account">
            标题
        </label>
        <input required ng-maxlength="150" type="text" class="form-control" ng-model="task.name" name="name" />
        <div ng-messages="newTaskForm.name.$error" ng-if="newTaskForm.$submitted || newTaskForm.name.$touched">
            <p class="error" ng-message="required">*请填写标题</p>
            <p class="error" ng-message="maxlength">*标题最大长度150</p>
        </div>
    </div>
    <div class="form-group col-md-6" ng-repeat="status in task.project.status_list | orderBy : status.sequence_order">
        <label>{{status.name}} 负责人</label>
        <select required class="form-control" ng-model="'task.status'+status.name" ng-options="qa.id as qa.last_name+' '+qa.last_name for qa in taskUserList" name="{{status.name}}">
        </select>
    </div>
    <!-- <div class="form-group col-md-6">
        <label for="email">
            选择开发人员
        </label>
        <select required class="form-control" ng-model="task.developer_id" ng-options="dev.id as dev.last_name+' '+dev.last_name for dev in taskUserList" name="developer">
        </select>
        <div ng-messages="newTaskForm.developer.$error" ng-if="newTaskForm.$submitted || newTaskForm.developer.$touched">
            <p class="error" ng-message="required">*请选择开发人员</p>
        </div>
    </div>
    <div class="form-group col-md-6">
        <label for="password">
            选择测试人员
        </label>
        <select required class="form-control" ng-model="task.tester_id" ng-options="qa.id as qa.last_name+' '+qa.last_name for qa in taskUserList" name="QA">
        </select>
        <div ng-messages="newTaskForm.QA.$error" ng-if="newTaskForm.$submitted || newTaskForm.QA.$touched">
            <p class="error" ng-message="required">*请选择测试人员</p>
        </div>
    </div> -->
    <div class="form-group col-md-6">
        <label for="password">
            预估时间
        </label>
        <div class="input-group">
            <input required type="number" class="form-control" ng-model="task.estimated_time" name="time" />
            <span class="input-group-addon">分钟</span>
        </div>
        <div ng-messages="newTaskForm.time.$error" ng-if="newTaskForm.$submitted || newTaskForm.time.$touched">
            <p class="error" ng-message="required">*请预估时间</p>
        </div>
    </div>
    <div class="form-group col-md-6">
        <label for="password">
            状态
        </label>
        <select required class="form-control" ng-model="task.status_id" ng-options="status.id as status.name for status in task.project.status_list | orderBy : status.sequence_order" name="status_id">
        </select>
        <div ng-messages="newTaskForm.status_id.$error" ng-if="newTaskForm.$submitted || newTaskForm.status_id.$touched">
            <p class="error" ng-message="required">*请选择当前状态</p>
        </div>
    </div>
    <div class="form-group col-md-12">
        <label>介绍</label>
        <textarea class="form-control" ng-model="task.description" rows="6"></textarea>
    </div>
    <div class="form-group col-md-12">
        <button type="submit" class="btn btn-primary">保存</button>
        <a ui-sref="app.task" class="btn btn-default">取消</a>
    </div>
</form>
