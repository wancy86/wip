<div class="col-md-12">
    <h3>我的任务</h3>
</div>
<form novalidate name="seachTaskFrom">
    <div class="form-group col-md-6">
        <label for="account">
            任务序号
        </label>
        <input type="text" class="form-control" ng-model="condition.item_id" />
    </div>
    <div class="form-group col-md-6">
        <label for="account">
            标题/介绍
        </label>
        <input type="text" class="form-control" ng-model="condition.item_name" />
    </div>
    <div class="form-group col-md-6">
        <label for="password">
            选择项目
        </label>
        <select class="form-control" ng-model="condition.selectedProject" ng-options="pro.project.name for pro in projectList track by pro.project.id">
        </select>
    </div>
    <div class="form-group col-md-6">
        <label for="password">
            选择状态
        </label>
        <select class="form-control" ng-model="condition.status_id">
            <option ng-repeat="prostat in condition.selectedProject.status_list" value="{{prostat.id}}">{{prostat.name}}</option>
        </select>
    </div>
    <div class="form-group col-md-6">
        <label for="password">
            指派类型
        </label>
        <select class="form-control" ng-model="condition.assign_type" ng-options="t.code as t.name for t in assignTypes">
        </select>
    </div>
    <div class="form-group col-md-6">
        <label for="password">
            选择用户
        </label>
        <select class="form-control" ng-model="condition.user_id" ng-options="user.id as user.last_name+' '+user.first_name for user in taskUserList">
        </select>
    </div>
    <div class="form-group col-md-12">
        <button ng-click="searchTask()" class="btn btn-primary"><span class="glyphicon glyphicon-search"></span> 搜索</button>
    </div>
</form>
<div class="col-md-12" ng-show="searched_tasks.length">
    <table class="table table-bordered">
        <tr>
            <th>序列号</th>
            <th>项目</th>
            <th>开发人员</th>
            <th>测试人员</th>
            <th>任务</th>
            <th>当前状态</th>
            <th>创建时间</th>
            <th>操作</th>
        </tr>
        <tr ng-repeat="(key, v) in searched_tasks | limitTo:maxSize:(currentPage-1)*maxSize">
            <td title="点击查看详情"><a ui-sref="app.task_detail({taskid:v.item_id})">{{v.item_id}}</a></td>
            <td>{{v.project_name}}</td>
            <td>{{v.last_name + ' ' + v.first_name}}</td>
            <td>{{v.last_name + ' ' + v.first_name}}</td>
            <td>{{v.item_name}}</td>
            <td>v.status</td>
            <td>v.entry_date</td>
            <td><a ui-sref="app.task_edit({taskid:v.item_id})"><span class="glyphicon glyphicon-edit"></span> 编辑</a></td>
        </tr>
    </table>
    <!-- 分页组件 -->
    <ul ng-show="totalItems" uib-pagination total-items="totalItems" max-size="maxSize" class="pagination-sm" boundary-link-numbers="true" ng-change="pageChanged()" ng-model="currentPage"></ul>
</div>
